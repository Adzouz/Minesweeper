(window.webpackJsonpdemineur=window.webpackJsonpdemineur||[]).push([[0],{18:function(e,t,n){e.exports=n(29)},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(11),s=n.n(r),i=n(10),l=n(8),c=n(12);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h={matrix:[],gameOver:!1},d=Object(l.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_MATRIX":return m({},e,{matrix:t.payload});case"UPDATE_GAME_STATUS":return m({},e,{gameOver:t.payload});default:return e}}}),p=Object(l.e)(d,{},Object(l.d)(l.a.apply(void 0,[]),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()||l.d)),b=(n(28),n(2)),f=n(3),g=n(5),y=n(4),v=n(1),w=n(6),E=function(e){return{type:"UPDATE_MATRIX",payload:e}},k=function(e){return{type:"UPDATE_GAME_STATUS",payload:e}},O={width:"24px"},x=function(e){var t=e.name;return o.a.createElement("img",{src:"/Minesweeper/icons/"+t+".svg",alt:"",style:O})},S={display:"flex"},C={backgroundColor:"transparent",border:"0",appearance:"none",padding:"8px 20px",cursor:"pointer",display:"block",position:"relative",zIndex:"11",marginTop:"30px"},j=function(e){var t=e.showSettings,n=e.showStats,a=e.closeModal,r=e.displaySettings,s=e.displayStats,i=null;return t||n?(i=o.a.createElement(x,{name:"close"}),o.a.createElement("button",{onClick:a,style:C},i)):o.a.createElement("div",{style:S},o.a.createElement("button",{onClick:r,style:C},o.a.createElement(x,{name:"settings"})),o.a.createElement("button",{onClick:s,style:C},o.a.createElement(x,{name:"chart"})))};var M={marginBottom:"10px",textAlign:"center"},T={display:"block",fontSize:"2.2rem"},B=function(){var e=JSON.parse(localStorage.getItem("played_games")),t={value:0,percent:0},n={value:0,percent:0};return e&&(t={value:e.won,percent:Math.round(100/(e.won+e.lost)*e.won)},n={value:e.lost,percent:Math.round(100/(e.won+e.lost)*e.lost)}),o.a.createElement("div",null,o.a.createElement("div",{style:M},"Won games:",o.a.createElement("strong",{style:T},t.value,"\xa0(",t.percent,"%)")),o.a.createElement("div",{style:M},"Lost games:",o.a.createElement("strong",{style:T},n.value,"\xa0(",n.percent,"%)")))};var R={position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:"10"},A={position:"fixed",top:"50%",left:"50%",justifyContent:"center",backgroundColor:"#fff",padding:"10px 15px",borderRadius:"5px",transform:"translate(-50%, -50%)",zIndex:"11"},I={appearance:"none",display:"block",width:"100%",border:"0",backgroundColor:"#27ae60",padding:"10px 15px",color:"#fff",marginTop:"1rem",fontSize:"1.4rem",cursor:"pointer"},_=function(e){var t=e.children,n=e.showModal,a=e.closeModal,r={display:n?"block":"none",fontSize:"1.6rem"};return o.a.createElement("div",{style:r},o.a.createElement("span",{style:R}),o.a.createElement("div",{style:A},t,o.a.createElement("button",{style:I,onClick:a},o.a.createElement(x,{name:"check"}))))},N=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(v.a)(n)),n}return Object(w.a)(t,e),Object(f.a)(t,[{key:"handleChange",value:function(e){this.props.handleChange(e)}},{key:"render",value:function(){return o.a.createElement("div",{className:"form"},o.a.createElement("label",{style:D},o.a.createElement("span",{style:L},"Rows:"),o.a.createElement("input",{type:"number",pattern:"\\d*",name:"nbRows",value:this.props.nbRows,onChange:this.handleChange,style:P})),o.a.createElement("label",{style:D},o.a.createElement("span",{style:L},"Columns:"),o.a.createElement("input",{type:"number",pattern:"\\d*",name:"nbColumns",value:this.props.nbColumns,onChange:this.handleChange,style:P})),o.a.createElement("label",{style:D},o.a.createElement("span",{style:L},"Bombs:"),o.a.createElement("input",{type:"number",pattern:"\\d*",min:"1",max:Math.round(this.props.nbRows*this.props.nbColumns-this.props.nbRows*this.props.nbColumns/100*50),name:"nbBombs",value:this.props.nbBombs,onChange:this.handleChange,style:P})))}}]),t}(a.Component),P={width:"50px",padding:"5px 0",border:"0",appearance:"none",margin:"5px",textAlign:"center",fontSize:"1.6rem",backgroundColor:"#ecf0f1",marginLeft:"auto"},D={display:"flex",alignItems:"center"},L={marginRight:"1rem"},z=N;var U={position:"fixed",top:"0",left:"0",right:"0",bottom:"0",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},W={backgroundColor:"rgba(255, 255, 255, 0.7)",position:"absolute",top:"0",bottom:"0",left:"0",right:"0",zIndex:"20"},G={width:"100%",backgroundColor:"#0a3d62",color:"#fff",padding:"10px 15px",marginBottom:"20px",position:"relative",zIndex:"21",textAlign:"center",flex:"0"},J={fontSize:"2.2rem",appearance:"none",marginBottom:"40px",padding:"10px 15px",backgroundColor:"#0a3d62",color:"#fff",border:"0",cursor:"pointer",borderRadius:"5px",position:"relative",zIndex:"21"},X=function(e){var t=e.gameOver,n=e.resetGame;return t?o.a.createElement("div",{className:"game-overlay",style:U},o.a.createElement("span",{style:W}),o.a.createElement("h2",{style:G},o.a.createElement("span",{role:"img","aria-label":"kaboom"},"\ud83d\udca5")," GAME OVER ",o.a.createElement("span",{role:"img","aria-label":"kaboom"},"\ud83d\udca5")),o.a.createElement("button",{style:J,onClick:n},"Reset")):o.a.createElement("div",{className:"game-overlay",style:U},o.a.createElement("span",{style:W}),o.a.createElement("h2",{style:G},o.a.createElement("span",{role:"img","aria-label":"hurray"},"\ud83c\udf89")," YOU WIN ",o.a.createElement("span",{role:"img","aria-label":"hurray"},"\ud83c\udf89")),o.a.createElement("button",{style:J,onClick:n},"Reset"))},V=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={animated:!1},n.handleClick=n.handleClick.bind(Object(v.a)(n)),n.handleButtonPress=n.handleButtonPress.bind(Object(v.a)(n)),n.handleButtonRelease=n.handleButtonRelease.bind(Object(v.a)(n)),n}return Object(w.a)(t,e),Object(f.a)(t,[{key:"handleClick",value:function(e){e.preventDefault();var t=this.props,n=t.coords,a=t.infos;if("click"!==e.type||a.marked)"contextmenu"===e.type&&this.toggleMarkTile(n);else if(this.showTile(n),a.bomb){this.displayAll(),this.props.updateGameStatus(!0);var o=JSON.parse(localStorage.getItem("played_games"));o?++o.lost:o={won:0,lost:1},localStorage.setItem("played_games",JSON.stringify(o))}}},{key:"handleButtonPress",value:function(){var e=this,t=this.props.coords;this.buttonPressTimer=setTimeout(function(){return e.toggleMarkTile(t)},600)}},{key:"handleButtonRelease",value:function(){clearTimeout(this.buttonPressTimer)}},{key:"displayAll",value:function(){console.log("ici");var e=this.props.matrix.map(function(e){return e.map(function(e){return e.showed=!0,e})});this.props.updateMatrix(e)}},{key:"showTile",value:function(e){var t=0,n=this.props.matrix.map(function(n,a){return n.map(function(n,o){return a===e[0]&&o===e[1]&&(n.marked=!1,n.showed=!0),n.showed||n.bomb||t++,n})});if(this.props.updateMatrix(n),0===t&&!this.props.gameOver){this.displayAll();var a=JSON.parse(localStorage.getItem("played_games"));a?++a.won:a={won:1,lost:0},localStorage.setItem("played_games",JSON.stringify(a))}0!==n[e[0]][e[1]].counter||n[e[0]][e[1]].bomb||(!n[e[0]-1]||!n[e[0]-1][e[1]-1]||0!==n[e[0]-1][e[1]-1].counter&&(0===n[e[0]-1][e[1]-1].counter||0!==n[e[0]][e[1]].counter)||n[e[0]-1][e[1]-1].bomb||n[e[0]-1][e[1]-1].showed||n[e[0]-1][e[1]-1].marked||this.showTile([e[0]-1,e[1]-1]),!n[e[0]-1]||!n[e[0]-1][e[1]]||0!==n[e[0]-1][e[1]].counter&&(0===n[e[0]-1][e[1]].counter||0!==n[e[0]][e[1]].counter)||n[e[0]-1][e[1]].bomb||n[e[0]-1][e[1]].showed||n[e[0]-1][e[1]].marked||this.showTile([e[0]-1,e[1]]),!n[e[0]-1]||!n[e[0]-1][e[1]+1]||0!==n[e[0]-1][e[1]+1].counter&&(0===n[e[0]-1][e[1]+1].counter||0!==n[e[0]][e[1]].counter)||n[e[0]-1][e[1]+1].bomb||n[e[0]-1][e[1]+1].showed||n[e[0]-1][e[1]+1].marked||this.showTile([e[0]-1,e[1]+1]),!n[e[0]]||!n[e[0]][e[1]-1]||0!==n[e[0]][e[1]-1].counter&&(0===n[e[0]][e[1]-1].counter||0!==n[e[0]][e[1]].counter)||n[e[0]][e[1]-1].bomb||n[e[0]][e[1]-1].showed||n[e[0]][e[1]-1].marked||this.showTile([e[0],e[1]-1]),!n[e[0]]||!n[e[0]][e[1]+1]||0!==n[e[0]][e[1]+1].counter&&(0===n[e[0]][e[1]+1].counter||0!==n[e[0]][e[1]].counter)||n[e[0]][e[1]+1].bomb||n[e[0]][e[1]+1].showed||n[e[0]][e[1]+1].marked||this.showTile([e[0],e[1]+1]),!n[e[0]+1]||!n[e[0]+1][e[1]-1]||0!==n[e[0]+1][e[1]-1].counter&&(0===n[e[0]+1][e[1]-1].counter||0!==n[e[0]][e[1]].counter)||n[e[0]+1][e[1]-1].bomb||n[e[0]+1][e[1]-1].showed||n[e[0]+1][e[1]-1].marked||this.showTile([e[0]+1,e[1]-1]),!n[e[0]+1]||!n[e[0]+1][e[1]]||0!==n[e[0]+1][e[1]].counter&&(0===n[e[0]+1][e[1]].counter||0!==n[e[0]][e[1]].counter)||n[e[0]+1][e[1]].bomb||n[e[0]+1][e[1]].showed||n[e[0]+1][e[1]].marked||this.showTile([e[0]+1,e[1]]),!n[e[0]+1]||!n[e[0]+1][e[1]+1]||0!==n[e[0]+1][e[1]+1].counter&&(0===n[e[0]+1][e[1]+1].counter||0!==n[e[0]][e[1]].counter)||n[e[0]+1][e[1]+1].bomb||n[e[0]+1][e[1]+1].showed||n[e[0]+1][e[1]+1].marked||this.showTile([e[0]+1,e[1]+1]))}},{key:"toggleMarkTile",value:function(e){var t=this.props.matrix.map(function(t,n){return t.map(function(t,a){return n===e[0]&&a===e[1]&&(t.marked=!t.marked),t})});this.props.updateMatrix(t)}},{key:"getCellStyle",value:function(){return{fontSize:"3rem",lineHeight:"48px",width:"50px",minWidth:"50px",height:"50px",textAlign:"center",cursor:"pointer",userSelect:"none",border:"2px solid #0a3d62",borderRadius:"8px",backgroundColor:this.props.infos.showed?"#fff":this.props.infos.marked?"#f39c12":"#051e31"}}},{key:"render",value:function(){var e=this.props.infos,t=e.bomb,n=e.counter,a=e.marked,r=e.showed,s=a?"animated ":"",i=e.suggested&&!r?"suggested":"";return o.a.createElement("td",{className:"col",style:this.getCellStyle(),onClick:this.handleClick,onContextMenu:this.handleClick,onTouchStart:this.handleButtonPress,onTouchEnd:this.handleButtonRelease,onMouseDown:this.handleButtonPress,onMouseUp:this.handleButtonRelease,onMouseLeave:this.handleButtonRelease},o.a.createElement("div",{className:s+i},a?o.a.createElement("span",{role:"img","aria-label":"flag"},"\ud83d\udea9"):t&&r?o.a.createElement("span",{role:"img","aria-label":"bomb"},"\ud83d\udca3"):n&&r>0?n:o.a.createElement("span",{role:"img","aria-label":"flag"},"\ud83d\udea9")))}}]),t}(a.Component),H={updateMatrix:E,updateGameStatus:k},Y=Object(i.b)(function(e){return{matrix:e.game.matrix,gameOver:e.game.gameOver}},H)(V),$=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){for(var e=[],t=this.props,n=t.row,a=t.columns,r=t.nbLeftTiles,s=0;s<a.length;s++)e.push(o.a.createElement(Y,{coords:[n,s],infos:a[s],key:s,nbLeftTiles:r}));return o.a.createElement("tr",{className:"row",style:q},e)}}]),t}(a.Component),q={width:"100%"},F=$,K=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){for(var e=[],t=this.props,n=t.table,a=t.nbLeftTiles,r=0;r<n.length;r++)e.push(o.a.createElement(F,{key:r,row:r,columns:n[r],nbLeftTiles:a}));return o.a.createElement("div",{style:Q},o.a.createElement("div",{className:"remaining",style:Z},"Remaining tiles: ",o.a.createElement("strong",null,a)),o.a.createElement("div",{className:"scrollable-table",style:ee},o.a.createElement("table",{style:te},o.a.createElement("tbody",null,e))))}}]),t}(a.Component),Q={flex:"1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",marginBottom:"10px"},Z={color:"#fff"},ee={maxWidth:"100%",overflowX:"scroll"},te={borderCollapse:"collapse"},ne=K,ae=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={nbRows:10,nbColumns:7,nbBombs:10,showSettings:!1,showStats:!1},n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.resetBombs=n.resetBombs.bind(Object(v.a)(n)),n.nbLeftTiles=n.nbLeftTiles.bind(Object(v.a)(n)),n.closeModal=n.closeModal.bind(Object(v.a)(n)),n.displaySettings=n.displaySettings.bind(Object(v.a)(n)),n.displayStats=n.displayStats.bind(Object(v.a)(n)),n}return Object(w.a)(t,e),Object(f.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(c.a)({},e.target.name,parseInt(e.target.value)>0?parseInt(e.target.value):1),this.resetBombs)}},{key:"reloadApp",value:function(){window.location.reload(!0)}},{key:"displaySettings",value:function(){this.setState({showStats:!1,showSettings:!0})}},{key:"displayStats",value:function(){this.setState({showStats:!0,showSettings:!1})}},{key:"closeModal",value:function(){this.setState({showStats:!1,showSettings:!1})}},{key:"nbLeftTiles",value:function(){var e=0;return this.props.matrix.map(function(t){return t.map(function(t){return t.showed||t.bomb||e++,t}),t}),e}},{key:"resetBombs",value:function(){var e=[],t=this.state.nbBombs,n=Math.round(this.state.nbRows*this.state.nbColumns-this.state.nbRows*this.state.nbColumns/100*50);this.state.nbBombs>n&&(this.setState({nbBombs:n}),t=n);for(var a=0;a<t;a++)for(var o=!0,r=[Math.floor(Math.random()*Math.floor(this.state.nbRows)),Math.floor(Math.random()*Math.floor(this.state.nbColumns))];o;)(o=e.filter(function(e){return e[0]===r[0]&&e[1]===r[1]}).length>0)?r=[Math.floor(Math.random()*Math.floor(this.state.nbRows)),Math.floor(Math.random()*Math.floor(this.state.nbColumns))]:e.push([r[0],r[1]]);for(var s=[],i=0;i<this.state.nbRows;i++){for(var l=[],c=0;c<this.state.nbColumns;c++)l.push({showed:!1,bomb:!1,counter:0,marked:!1});s.push(l)}e.map(function(e){return s[e[0]][e[1]].bomb=!0,e});for(var u=[],m=function(t){for(var n=function(n){var a=0;e.map(function(e){return e[0]===t-1&&e[1]===n-1&&a++,e[0]===t-1&&e[1]===n&&a++,e[0]===t-1&&e[1]===n+1&&a++,e[0]===t&&e[1]===n-1&&a++,e[0]===t&&e[1]===n+1&&a++,e[0]===t+1&&e[1]===n-1&&a++,e[0]===t+1&&e[1]===n&&a++,e[0]===t+1&&e[1]===n+1&&a++,e}),s[t][n].counter=a,0!==a||s[t][n].bomb||u.push([t,n])},a=0;a<s[t].length;a++)n(a)},h=0;h<s.length;h++)m(h);if(u.length>0){var d=u[Math.floor(Math.random()*Math.floor(u.length))];s[d[0]][d[1]].suggested=!0}this.props.updateGameStatus(!1),this.props.updateMatrix(s)}},{key:"componentDidMount",value:function(){this.resetBombs()}},{key:"render",value:function(){var e=this,t=null;return(this.props.gameOver||this.nbLeftTiles()<=0&&!this.props.gameOver)&&(t=o.a.createElement(X,{gameOver:this.props.gameOver,resetGame:this.resetBombs})),o.a.createElement("div",{className:"App",style:re},o.a.createElement(j,{showSettings:this.state.showSettings,showStats:this.state.showStats,closeModal:this.closeModal,displaySettings:this.displaySettings,displayStats:this.displayStats}),o.a.createElement(_,{showModal:this.state.showStats,closeModal:this.closeModal},o.a.createElement(B,null)),o.a.createElement(_,{showModal:this.state.showSettings,closeModal:this.closeModal},o.a.createElement(z,{handleChange:this.handleChange,nbRows:this.state.nbRows,nbColumns:this.state.nbColumns,nbBombs:this.state.nbBombs})),t,o.a.createElement(ne,{table:this.props.matrix,nbLeftTiles:this.nbLeftTiles()}),o.a.createElement("a",{href:"https://thewebsdoor.com",target:"_blank",rel:"noopener noreferrer",style:se},"The Web's Door"),o.a.createElement("div",{id:"notification",onClick:function(){return e.reloadApp()}},"New update available, click on this message to load it."))}}]),t}(a.Component),oe={updateMatrix:E,updateGameStatus:k},re={height:"100vh",display:"flex",flexDirection:"column",alignItems:"center"},se={fontSize:"1.4rem",color:"#fff",marginBottom:"20px"},ie=Object(i.b)(function(e){return{matrix:e.game.matrix,gameOver:e.game.gameOver}},oe)(ae),le=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,t){new Promise(function(n,a){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e),n(!0)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}).then(function(){document.getElementById("notification").className="show"})}!function(e){if("serviceWorker"in navigator){if(new URL("/Minesweeper",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/Minesweeper","/service-worker.js");le?(!function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ce(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ce(t,e)})}}(),s.a.render(o.a.createElement(i.a,{store:p},o.a.createElement(ie,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.9ef99f0f.chunk.js.map