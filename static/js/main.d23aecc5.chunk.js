(window.webpackJsonpdemineur=window.webpackJsonpdemineur||[]).push([[0],{18:function(e,t,n){e.exports=n(29)},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(11),i=n.n(r),s=n(10),l=n(8),c=n(12);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h={matrix:[],gameOver:!1},p=Object(l.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_MATRIX":return u({},e,{matrix:t.payload});case"UPDATE_GAME_STATUS":return u({},e,{gameOver:t.payload});default:return e}}}),b=Object(l.e)(p,{},Object(l.d)(l.a.apply(void 0,[]),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()||l.d)),d=(n(28),n(1)),f=n(2),g=n(4),y=n(3),v=n(6),w=n(5),O=function(e){return{type:"UPDATE_MATRIX",payload:e}},E=function(e){return{type:"UPDATE_GAME_STATUS",payload:e}},x=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(v.a)(n)),n}return Object(w.a)(t,e),Object(f.a)(t,[{key:"handleChange",value:function(e){this.props.handleChange(e)}},{key:"render",value:function(){return o.a.createElement("form",{style:C},o.a.createElement("label",{style:k},"Rows: ",o.a.createElement("input",{type:"number",pattern:"\\d*",name:"nbRows",value:this.props.nbRows,onChange:this.handleChange,style:j})),o.a.createElement("label",{style:k},"Columns: ",o.a.createElement("input",{type:"number",pattern:"\\d*",name:"nbColumns",value:this.props.nbColumns,onChange:this.handleChange,style:j})),o.a.createElement("label",{style:k},"Bombs: ",o.a.createElement("input",{type:"number",pattern:"\\d*",min:"1",max:Math.round(this.props.nbRows*this.props.nbColumns-this.props.nbRows*this.props.nbColumns/100*50),name:"nbBombs",value:this.props.nbBombs,onChange:this.handleChange,style:j})))}}]),t}(a.Component),C={display:"flex",justifyContent:"center",width:"100%",backgroundColor:"#0a3d62",padding:"5px"},j={width:"50px",padding:"5px 0",border:"0",appearance:"none",margin:"5px",textAlign:"center"},k={display:"flex",alignItems:"center",color:"#fff"},T=x;var M={position:"fixed",top:"0",left:"0",right:"0",bottom:"0",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},R={backgroundColor:"rgba(255, 255, 255, 0.7)",position:"absolute",top:"0",bottom:"0",left:"0",right:"0",zIndex:"1"},S={width:"100%",backgroundColor:"#0a3d62",color:"#fff",padding:"10px 15px",marginBottom:"20px",position:"relative",zIndex:"1",textAlign:"center"},A={fontSize:"2.2rem",appearance:"none",marginBottom:"40px",padding:"10px 15px",backgroundColor:"#0a3d62",color:"#fff",border:"0",cursor:"pointer",borderRadius:"5px",position:"relative",zIndex:"2"},I={minWidth:"100%",minHeight:"100%",position:"absolute",top:"0",left:"0",zIndex:"0",opacity:"0.5"},_={position:"absolute",bottom:"0",right:"0",zIndex:"2"},B={position:"absolute",bottom:"-20%",left:"0",width:"100%",zIndex:"1"},D={position:"absolute",bottom:"0",left:"0",zIndex:"2"},W={position:"absolute",bottom:"10%",left:"50%",transform:"translateX(-50%)",zIndex:"2",width:"400px"},N={position:"absolute",top:"0",right:"10%",zIndex:"2",maxWidth:"300px"},P={position:"absolute",top:"10%",left:"10%",zIndex:"2",maxWidth:"300px"},z=function(e){var t=e.gameOver,n=e.resetGame;return t?o.a.createElement("div",{className:"game-overlay",style:M},o.a.createElement("span",{style:R}),o.a.createElement("img",{alt:"",src:"https://media0.giphy.com/media/26tPdwMm4jyClgxTq/giphy.gif?cid=790b76113be8a3eda238c4edaa4be3e66abd0b54a5f7de32&rid=giphy.gif",style:I}),o.a.createElement("img",{alt:"",src:"https://i.gifer.com/5GpM.gif",style:B}),o.a.createElement("img",{alt:"",src:"https://i.gifer.com/YGg6.gif",style:W}),o.a.createElement("img",{alt:"",src:"https://media2.giphy.com/media/13zvwxJX6VzHqg/source.gif",style:D}),o.a.createElement("img",{alt:"",src:"https://media2.giphy.com/media/KfMhwrXg5WXjRC7v3M/giphy.gif",style:_}),o.a.createElement("img",{alt:"",src:"https://media3.giphy.com/media/10a1Cwco2kUtlS/giphy.gif",style:N}),o.a.createElement("img",{alt:"",src:"https://media.giphy.com/media/QPoCzipoOdlAODKovi/giphy.gif",style:P}),o.a.createElement("h2",{style:S},o.a.createElement("span",{role:"img","aria-label":"kaboom"},"\ud83d\udca5")," GAME OVER ",o.a.createElement("span",{role:"img","aria-label":"kaboom"},"\ud83d\udca5")),o.a.createElement("button",{style:A,onClick:n},"Reset")):o.a.createElement("div",{className:"game-overlay",style:M},o.a.createElement("img",{alt:"",src:"https://media.giphy.com/media/3rgXBvnbXtxwaWmhr2/source.gif",style:I}),o.a.createElement("img",{alt:"",src:"https://i.imgur.com/fWs529F.gif",style:_}),o.a.createElement("img",{alt:"",src:"https://img1.picmix.com/output/stamp/normal/5/9/6/8/648695_03eca.gif",style:B}),o.a.createElement("img",{alt:"",src:"https://media2.giphy.com/media/3ov9jCNV5rD8mCjsNG/giphy.gif",style:D}),o.a.createElement("img",{alt:"",className:"rotate",src:"https://media2.giphy.com/media/XWR4jehW2X2E0/giphy.gif",style:W}),o.a.createElement("img",{alt:"",src:"https://66.media.tumblr.com/8536b658c824f7f5ee5db70e5af1e11c/tumblr_pfa585inqo1rm7fw6o1_1280.gif",style:N}),o.a.createElement("img",{alt:"",src:"https://media.giphy.com/media/3oKIPvsbX1yYTrvC6s/giphy.gif",style:P}),o.a.createElement("h2",{style:S},o.a.createElement("span",{role:"img","aria-label":"hurray"},"\ud83c\udf89")," YOU WIN ",o.a.createElement("span",{role:"img","aria-label":"hurray"},"\ud83c\udf89")),o.a.createElement("button",{style:A,onClick:n},"Reset"))},X=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).handleClick=n.handleClick.bind(Object(v.a)(n)),n}return Object(w.a)(t,e),Object(f.a)(t,[{key:"handleClick",value:function(e){e.preventDefault();var t=this.props,n=t.coords,a=t.infos;"click"!==e.type||a.marked?"contextmenu"===e.type&&this.toggleMarkTile(n):(this.showTile(n),a.bomb&&(this.displayAll(),this.props.updateGameStatus(!0)))}},{key:"displayAll",value:function(){var e=this.props.matrix.map(function(e){return e.map(function(e){return e.showed=!0,e})});this.props.updateMatrix(e)}},{key:"showTile",value:function(e){var t=this.props.matrix.map(function(t,n){return t.map(function(t,a){return n===e[0]&&a===e[1]&&(t.marked=!1,t.showed=!0),t})});this.props.updateMatrix(t),0!==this.props.nbLeftTiles||this.props.gameOver||this.displayAll(),0!==t[e[0]][e[1]].counter||t[e[0]][e[1]].bomb||(t[e[0]-1]&&t[e[0]-1][e[1]-1]&&(0===t[e[0]-1][e[1]-1].counter||0!==t[e[0]-1][e[1]-1].counter&&0===t[e[0]][e[1]].counter)&&!t[e[0]-1][e[1]-1].bomb&&!t[e[0]-1][e[1]-1].showed&&this.showTile([e[0]-1,e[1]-1]),t[e[0]-1]&&t[e[0]-1][e[1]]&&(0===t[e[0]-1][e[1]].counter||0!==t[e[0]-1][e[1]].counter&&0===t[e[0]][e[1]].counter)&&!t[e[0]-1][e[1]].bomb&&!t[e[0]-1][e[1]].showed&&this.showTile([e[0]-1,e[1]]),t[e[0]-1]&&t[e[0]-1][e[1]+1]&&(0===t[e[0]-1][e[1]+1].counter||0!==t[e[0]-1][e[1]+1].counter&&0===t[e[0]][e[1]].counter)&&!t[e[0]-1][e[1]+1].bomb&&!t[e[0]-1][e[1]+1].showed&&this.showTile([e[0]-1,e[1]+1]),t[e[0]]&&t[e[0]][e[1]-1]&&(0===t[e[0]][e[1]-1].counter||0!==t[e[0]][e[1]-1].counter&&0===t[e[0]][e[1]].counter)&&!t[e[0]][e[1]-1].bomb&&!t[e[0]][e[1]-1].showed&&this.showTile([e[0],e[1]-1]),t[e[0]]&&t[e[0]][e[1]+1]&&(0===t[e[0]][e[1]+1].counter||0!==t[e[0]][e[1]+1].counter&&0===t[e[0]][e[1]].counter)&&!t[e[0]][e[1]+1].bomb&&!t[e[0]][e[1]+1].showed&&this.showTile([e[0],e[1]+1]),t[e[0]+1]&&t[e[0]+1][e[1]-1]&&(0===t[e[0]+1][e[1]-1].counter||0!==t[e[0]+1][e[1]-1].counter&&0===t[e[0]][e[1]].counter)&&!t[e[0]+1][e[1]-1].bomb&&!t[e[0]+1][e[1]-1].showed&&this.showTile([e[0]+1,e[1]-1]),t[e[0]+1]&&t[e[0]+1][e[1]]&&(0===t[e[0]+1][e[1]].counter||0!==t[e[0]+1][e[1]].counter&&0===t[e[0]][e[1]].counter)&&!t[e[0]+1][e[1]].bomb&&!t[e[0]+1][e[1]].showed&&this.showTile([e[0]+1,e[1]]),t[e[0]+1]&&t[e[0]+1][e[1]+1]&&(0===t[e[0]+1][e[1]+1].counter||0!==t[e[0]+1][e[1]+1].counter&&0===t[e[0]][e[1]].counter)&&!t[e[0]+1][e[1]+1].bomb&&!t[e[0]+1][e[1]+1].showed&&this.showTile([e[0]+1,e[1]+1]))}},{key:"toggleMarkTile",value:function(e){var t=this.props.matrix.map(function(t,n){return t.map(function(t,a){return n===e[0]&&a===e[1]&&(t.marked=!t.marked),t})});this.props.updateMatrix(t)}},{key:"getCellStyle",value:function(){return{fontSize:"3rem",lineHeight:"48px",width:"50px",minWidth:"50px",height:"50px",textAlign:"center",cursor:"pointer",userSelect:"none",border:"2px solid #0a3d62",borderRadius:"8px",backgroundColor:this.props.infos.showed?"#fff":"#051e31"}}},{key:"render",value:function(){var e=this.props.infos,t=e.bomb,n=e.counter,a=e.marked,r=e.showed;return o.a.createElement("td",{className:"col",style:this.getCellStyle(),onClick:this.handleClick,onContextMenu:this.handleClick},o.a.createElement("div",null,a?o.a.createElement("span",{role:"img","aria-label":"flag"},"\ud83d\udea9"):t&&r?o.a.createElement("span",{role:"img","aria-label":"bomb"},"\ud83d\udca3"):n&&r>0?n:""))}}]),t}(a.Component),L={updateMatrix:O,updateGameStatus:E},U=Object(s.b)(function(e){return{matrix:e.game.matrix,gameOver:e.game.gameOver}},L)(X),G=function(e){function t(){return Object(d.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){for(var e=[],t=this.props,n=t.row,a=t.columns,r=t.nbLeftTiles,i=0;i<a.length;i++)e.push(o.a.createElement(U,{coords:[n,i],infos:a[i],key:i,nbLeftTiles:r}));return o.a.createElement("tr",{className:"row",style:V},e)}}]),t}(a.Component),V={width:"100%"},q=G,H=function(e){function t(){return Object(d.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){for(var e=[],t=this.props,n=t.table,a=t.nbLeftTiles,r=0;r<n.length;r++)e.push(o.a.createElement(q,{key:r,row:r,columns:n[r],nbLeftTiles:a}));return o.a.createElement("div",{style:J},o.a.createElement("div",{className:"remaining",style:K},"Remaining tiles: ",o.a.createElement("strong",null,a)),o.a.createElement("div",{className:"scrollable-table",style:Y},o.a.createElement("table",{style:F},o.a.createElement("tbody",null,e))))}}]),t}(a.Component),J={flex:"1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%"},K={fontSize:"2rem",color:"#fff"},Y={maxWidth:"100%",overflowX:"scroll"},F={borderCollapse:"collapse"},Q=H,$=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={nbRows:10,nbColumns:7,nbBombs:10},n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.resetBombs=n.resetBombs.bind(Object(v.a)(n)),n.nbLeftTiles=n.nbLeftTiles.bind(Object(v.a)(n)),n}return Object(w.a)(t,e),Object(f.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(c.a)({},e.target.name,parseInt(e.target.value)>0?parseInt(e.target.value):1),this.resetBombs)}},{key:"nbLeftTiles",value:function(){var e=0;return this.props.matrix.map(function(t){return t.map(function(t){return t.showed||t.bomb||e++,t}),t}),e}},{key:"resetBombs",value:function(){var e=[],t=this.state.nbBombs,n=Math.round(this.state.nbRows*this.state.nbColumns-this.state.nbRows*this.state.nbColumns/100*50);this.state.nbBombs>n&&(this.setState({nbBombs:n}),t=n);for(var a=0;a<t;a++)for(var o=!0,r=[Math.floor(Math.random()*Math.floor(this.state.nbRows)),Math.floor(Math.random()*Math.floor(this.state.nbColumns))];o;)(o=e.filter(function(e){return e[0]===r[0]&&e[1]===r[1]}).length>0)?r=[Math.floor(Math.random()*Math.floor(this.state.nbRows)),Math.floor(Math.random()*Math.floor(this.state.nbColumns))]:e.push([r[0],r[1]]);for(var i=[],s=0;s<this.state.nbRows;s++){for(var l=[],c=0;c<this.state.nbColumns;c++)l.push({showed:!1,bomb:!1,counter:0,marked:!1});i.push(l)}e.map(function(e){return i[e[0]][e[1]].bomb=!0,e});for(var m=function(t){for(var n=function(n){var a=0;e.map(function(e){return e[0]===t-1&&e[1]===n-1&&a++,e[0]===t-1&&e[1]===n&&a++,e[0]===t-1&&e[1]===n+1&&a++,e[0]===t&&e[1]===n-1&&a++,e[0]===t&&e[1]===n+1&&a++,e[0]===t+1&&e[1]===n-1&&a++,e[0]===t+1&&e[1]===n&&a++,e[0]===t+1&&e[1]===n+1&&a++,e}),i[t][n].counter=a},a=0;a<i[t].length;a++)n(a)},u=0;u<i.length;u++)m(u);this.props.updateGameStatus(!1),this.props.updateMatrix(i)}},{key:"componentDidMount",value:function(){this.resetBombs()}},{key:"render",value:function(){var e=null;return(this.props.gameOver||this.nbLeftTiles()<=0&&!this.props.gameOver)&&(e=o.a.createElement(z,{gameOver:this.props.gameOver,resetGame:this.resetBombs})),o.a.createElement("div",{className:"App",style:ee},o.a.createElement(T,{handleChange:this.handleChange,nbRows:this.state.nbRows,nbColumns:this.state.nbColumns,nbBombs:this.state.nbBombs}),e,o.a.createElement(Q,{table:this.props.matrix,nbLeftTiles:this.nbLeftTiles()}))}}]),t}(a.Component),Z={updateMatrix:O,updateGameStatus:E},ee={height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},te=Object(s.b)(function(e){return{matrix:e.game.matrix,gameOver:e.game.gameOver}},Z)($),ne=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(s.a,{store:b},o.a.createElement(te,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Minesweeper",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/Minesweeper","/service-worker.js");ne?(!function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ae(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ae(t,e)})}}()}},[[18,1,2]]]);
//# sourceMappingURL=main.d23aecc5.chunk.js.map